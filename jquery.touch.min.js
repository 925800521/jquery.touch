/* jquery.touch.js v0.1 | (c) n33 | n33.co | MIT licensed */
(function(g){function d(c,a){this.settings=g.extend(k,a);this.element=c;this.inDrag=this.inTap=!1;this.ey=this.ex=this.y=this.x=this.timerTapAndHold=this.timerTap=this.dragStart=this.tapStart=null;this.taps=0;this.init()}var k={useTapAndHold:!1,useMouse:!0,dragThreshold:10,swipeThreshold:30,tapLimit:2,tapDelay:250,tapAndHoldDelay:1E3};d.prototype.init=function(){var c=this;c.element.on("touchstart",function(a){a.preventDefault();c.doStart(a.originalEvent.touches[0].pageX,a.originalEvent.touches[0].pageY)}).on("touchmove",
function(a){a.preventDefault();c.doMove(a.originalEvent.changedTouches[0].pageX,a.originalEvent.changedTouches[0].pageY)}).on("touchend",function(a){a.preventDefault();c.doEnd(a.originalEvent.changedTouches[0].pageX,a.originalEvent.changedTouches[0].pageY)});c.settings.useMouse&&(c.mouseDown=!1,c.element.on("mousedown",function(a){a.preventDefault();c.mouseDown=!0;c.doStart(a.pageX,a.pageY)}).on("mousemove",function(a){c.mouseDown&&(a.preventDefault(),c.doMove(a.pageX,a.pageY))}).on("mouseup mouseleave",
function(a){a.preventDefault();c.mouseDown=!1;c.doEnd(a.pageX,a.pageY)}))};d.prototype.cancel=function(){this.taps=0;this.inDrag=this.inTap=!1;this.dragStart=this.tapStart=null};d.prototype.doStart=function(c,a){var b=this,e=b.element.offset();b.x=c;b.y=a;b.ex=c-e.left;b.ey=a-e.top;b.tapStart=Date.now();window.clearTimeout(b.timerTap);b.timerTap=window.setTimeout(function(){b.inTap&&0<b.taps&&(b.element.trigger(2==b.taps?"doubleTap":"tap",{taps:b.taps,x:b.x,y:b.y,ex:b.ex,ey:b.ey,duration:Date.now()-
b.tapStart}),b.cancel());b.timerTap=null},b.settings.tapDelay);window.clearTimeout(b.timerTapAndHold);b.timerTapAndHold=window.setTimeout(function(){b.settings.useTapAndHold&&b.inTap&&(b.element.trigger("tapAndHold",{x:b.x,y:b.y,ex:b.ex,ey:b.ey,duration:Date.now()-b.tapStart}),b.cancel());b.timerTapAndHold=null},b.settings.tapAndHoldDelay);b.inTap=!0};d.prototype.doMove=function(c,a){var b=this.element.offset(),e=(Math.abs(this.x-c)+Math.abs(this.y-a))/2;this.inDrag?this.element.trigger("drag",{x:c,
y:a,ex:c-b.left,ey:a-b.top}):e>this.settings.dragThreshold&&(this.cancel(),this.inDrag=!0,this.dragStart=Date.now(),this.element.trigger("dragStart",{x:c,y:a,ex:c-b.left,ey:a-b.top}))};d.prototype.doEnd=function(c,a){var b=this.element.offset(),e=Math.abs(this.x-c),d=Math.abs(this.y-a),g,h,f;if(this.inTap){if(this.taps++,!this.timerTap||this.taps>=this.settings.tapLimit)this.element.trigger(2==this.taps?"doubleTap":"tap",{taps:this.taps,x:this.x,y:this.y,ex:this.ex,ey:this.ey,duration:Date.now()-
this.tapStart}),this.cancel()}else if(this.inDrag){f=Date.now()-this.dragStart;g=Math.sqrt(Math.pow(Math.abs(this.x-c),2)+Math.pow(Math.abs(this.y-a),2));h=g/f;this.element.trigger("dragEnd",{start:{x:this.x,y:this.y,ex:this.ex,ey:this.ey},end:{x:c,y:a,ex:c-b.left,ey:a-b.top},distance:g,duration:f,velocity:h});if(e>this.settings.swipeThreshold||d>this.settings.swipeThreshold)this.element.trigger("swipe",{distance:g,duration:f,velocity:h}),e>d?(h=e/f,c<this.x?this.element.trigger("swipeLeft",{distance:e,
duration:f,velocity:h}):this.element.trigger("swipeRight",{distance:e,duration:f,velocity:h})):d>e&&(h=d/f,a<this.y?this.element.trigger("swipeUp",{distance:d,duration:f,velocity:h}):this.element.trigger("swipeDown",{distance:d,duration:f,velocity:h}));this.inDrag=!1}};g.fn.enableTouch=function(c){if(1<this.length)for(var a=0;a<this.length;a++)g(this[a]).enableTouch();a=g(this);new d(a,c);return a}})(jQuery);
